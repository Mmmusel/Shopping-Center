"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[875],{1526:function(t,e,s){s.r(e),s.d(e,{default:function(){return O}});var r=s(6190),a=s(322),i=s(2118),o=s(3821),n=s(4324),c=s(5808),d=s(4525),u=s(6098),l=s(5626),f=s(1713),m=s(3687),p=s(6313),h=s(7953),g=function(){var t=this,e=t._self._c;return e("div",[e(i.Z,{attrs:{fluid:""}},[e(o.Z,{attrs:{items:t.productsList,"items-per-page":t.itemsPerPage,page:t.page,search:t.search,"hide-default-footer":""},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"header",fn:function(){return[e(p.Z,{staticClass:"mb-1",attrs:{dark:"",color:"blue darken-3"}},[e(m.Z),e(h.qW,[e("h4",[t._v("上架商品")])]),e(m.Z)],1)]},proxy:!0},{key:"default",fn:function(s){return[e(f.Z,t._l(s.items,(function(t){return e(a.Z,{key:t.fields.product_name},[e("business_Product",{key:t.fields.id,attrs:{info:t}})],1)})),1)]}},{key:"footer",fn:function(){return[e(f.Z,{staticClass:"mt-2",attrs:{align:"center",justify:"center"}},[e("span",{staticClass:"grey--text"},[t._v("Items per page")]),e(l.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(r.Z,t._g(t._b({staticClass:"ml-2",attrs:{dark:"",text:"",color:"primary"}},"v-btn",a,!1),s),[t._v(" "+t._s(t.itemsPerPage)+" "),e(n.Z,[t._v("mdi-chevron-down")])],1)]}}])},[e(c.Z,t._l(t.itemsPerPageArray,(function(s,r){return e(d.Z,{key:r,on:{click:function(e){return t.updateItemsPerPage(s)}}},[e(u.V9,[t._v(t._s(s))])],1)})),1)],1),e(m.Z),e("span",{staticClass:"mr-4 grey--text"},[t._v(" Page "+t._s(t.page)+" of "+t._s(t.numberOfPages)+" ")]),e(r.Z,{staticClass:"mr-1",attrs:{fab:"",dark:"",color:"blue darken-3"},on:{click:t.formerPage}},[e(n.Z,[t._v("mdi-chevron-left")])],1),e(r.Z,{staticClass:"ml-1",attrs:{fab:"",dark:"",color:"blue darken-3"},on:{click:t.nextPage}},[e(n.Z,[t._v("mdi-chevron-right")])],1)],1)]},proxy:!0}])})],1),e(r.Z,{staticClass:"ma-2",attrs:{color:"success"},on:{click:t.addCommodity}},[t._v(" 添加商品 ")])],1)},_=[],y=(s(7658),function(){var t=this,e=t._self._c;return e("div",{staticClass:"product"},[e("router-link",{staticClass:"product-main",attrs:{to:"/product/"+t.info.pk}},[e("img",{attrs:{src:`http://127.0.0.1:8000/media/${t.info.fields.product_image}`,alt:"",height:"200px"}}),e("h4",[t._v(t._s(t.info.fields.product_name))]),e("h4",[t._v("销量"+t._s(t.info.fields.product_sales))]),e("div",{staticClass:"product-color",style:{background:t.colors[t.info.fields.product_color]}}),e("div",{staticClass:"product-cost"},[t._v("￥ "+t._s(t.info.fields.product_cost))]),e("div",{staticClass:"product-add-cart",on:{click:function(e){return e.preventDefault(),t.handleAddCart.apply(null,arguments)}}},[t._v("增加库存")])])],1)}),P=[],k={props:{info:Object},data(){return{colors:{"白色":"#ffffff","金色":"#dac272","蓝色":"#233472","红色":"#f2352e"}}},methods:{async handleAddCart(){this.$router.push({path:"/business/commodity/edit_commodity_stock/"+this.info.pk})}}},v=k,b=s(1001),Z=(0,b.Z)(v,y,P,!1,null,"2a72fc84",null),C=Z.exports,x={name:"business_commodity",components:{business_Product:C},data(){return{itemsPerPageArray:[4,8,12],search:"",filter:{},sortDesc:!1,page:1,itemsPerPage:4,keys:["库存","金额"],productsList:[],items:[{name:"手机","库存":1e4,"金额":"5000元"},{name:"面包","库存":5e4,"金额":"3元"},{name:"牛奶1","库存":1e3,"金额":"5元"},{name:"牛奶2","库存":1e3,"金额":"5元"},{name:"牛奶3","库存":1e3,"金额":"5元"},{name:"牛奶4","库存":1e3,"金额":"5元"},{name:"牛奶5","库存":1e3,"金额":"5元"}]}},computed:{numberOfPages(){return Math.ceil(this.productsList.length/this.itemsPerPage)},filteredKeys(){return this.keys.filter((t=>"Name"!==t))},myFilteredKeys(){return 0!=this.productsList.length?Object.keys(this.productsList[1].fields).filter((t=>"product_name"!==t)):[]}},methods:{nextPage(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage(){this.page-1>=1&&(this.page-=1)},updateItemsPerPage(t){this.itemsPerPage=t},async getProductsList(){await this.axios.get("show_products/").then((t=>{console.log(t.data.list),this.productsList=t.data.list.filter((t=>t.fields.product_business===this.$store.state.userId)),console.log(this.productsList)})).catch((function(t){console.log(t)}))},addCommodity(){this.$router.push({path:"/business/commodity/add_commodity"})}},async created(){await this.getProductsList(),console.log("this"),console.log(JSON.stringify(this.productsList)),console.log(this.myFilteredKeys)}},L=x,w=(0,b.Z)(L,g,_,!1,null,null,null),O=w.exports},7953:function(t,e,s){s.d(e,{qW:function(){return i}});var r=s(6313),a=s(5352);const i=(0,a.Ji)("v-toolbar__title"),o=(0,a.Ji)("v-toolbar__items");r.Z}}]);
//# sourceMappingURL=875.4c3f28eb.js.map