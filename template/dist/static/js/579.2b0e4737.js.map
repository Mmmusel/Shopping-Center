{"version":3,"file":"static/js/579.2b0e4737.js","mappings":"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","sources":["webpack://my-project/./src/components/customer/login.vue","webpack://my-project/src/components/customer/login.vue","webpack://my-project/./src/components/customer/login.vue?542c","webpack://my-project/./src/components/customer/login.vue?59bb"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-info\"},[(_vm.login)?[_c('form',{staticClass:\"login-info-form\"},[_c('p',[_vm._v(\"登陆界面\")]),_c('br'),_c('span',[_vm._v(\"用户账号: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing)return;_vm.username=$event.target.value}}}),_c('br'),_c('span',[_vm._v(\"用户密码: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value}}}),_c('br'),_c('br'),_c('input',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"value\":\"提交\"},on:{\"click\":_vm.goHome}}),_c('input',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"value\":\"前往注册\"},on:{\"click\":function($event){return _vm.changeLogin(false, true)}}})])]:_vm._e(),(_vm.register)?[_c('form',{staticClass:\"login-info-form\"},[_c('p',[_vm._v(\"注册界面\")]),_c('br'),_c('span',[_vm._v(\"用户账号: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing)return;_vm.username=$event.target.value}}}),_c('br'),_c('span',[_vm._v(\"用户密码: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value}}}),_c('br'),_c('span',[_vm._v(\"确认密码: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.confirmPassword),expression:\"confirmPassword\"}],attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.confirmPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.confirmPassword=$event.target.value}}}),_c('br'),_c('br'),_c('input',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"value\":\"提交\"},on:{\"click\":_vm.goLogin}}),_c('input',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"value\":\"已有账号\"},on:{\"click\":function($event){return _vm.changeLogin(true, false)}}})])]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"login-info\">\r\n        <template v-if=\"login\">\r\n            <form class=\"login-info-form\">\r\n                <p>登陆界面</p><br>\r\n                <span>用户账号: </span><input type=\"text\" v-model=\"username\" placeholder=\"\"/><br>\r\n                <span>用户密码: </span><input type=\"password\" v-model=\"password\"/><br><br>\r\n                <input class=\"submit\" type=\"button\" @click=\"goHome\" value=\"提交\">\r\n                <input class=\"submit\" type=\"button\" @click=\"changeLogin(false, true)\" value=\"前往注册\">\r\n            </form>\r\n\r\n        </template>\r\n        <template v-if=\"register\">\r\n            <form class=\"login-info-form\">\r\n                <p>注册界面</p><br>\r\n                <span>用户账号: </span><input type=\"text\" v-model=\"username\" placeholder=\"\"/><br>\r\n                <span>用户密码: </span><input type=\"password\" v-model=\"password\"/><br>\r\n                <span>确认密码: </span><input type=\"password\" v-model=\"confirmPassword\"/><br><br>\r\n                <input class=\"submit\" type=\"button\" @click=\"goLogin\" value=\"提交\">\r\n                <input class=\"submit\" type=\"button\" @click=\"changeLogin(true, false)\" value=\"已有账号\">\r\n            </form>\r\n        </template>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import util from './util';\r\n    export default {\r\n        name: \"login_View\",\r\n        data(){\r\n            return {\r\n                login: false,\r\n                register: true,\r\n                username: '',\r\n                password: '',\r\n                confirmPassword: '',\r\n                res: false,  //数据库操作返回值\r\n                userId: 0  //当前登录的用户\r\n            }\r\n        },\r\n        methods: {\r\n           async  goLogin(){\r\n\r\n                if(!util.trim(this.username) || !util.trim(this.password) ){ //TODO 111\r\n                    window.alert('账号或密码不能为空');\r\n                    return;\r\n                }\r\n                if(this.password !== this.confirmPassword){\r\n                    window.alert('密码不一致，请重新输入');\r\n                    this.password = '';\r\n                    this.confirmPassword = '';\r\n                }else{\r\n                  //把注册信息写进数据库\r\n                  await this.addUserInfo(this.username,this.password)\r\n\r\n                  //res返回值 标志是否有重名\r\n                  if(this.res) {\r\n                    this.register = false;\r\n\r\n                    //设置当前登陆状态；用于下次打开页面的默认登录\r\n                    window.localStorage.setItem('loginStatus', 'login');\r\n\r\n                    //把用户【id】保存在vuex，便于home页面使用\r\n                    //this.$store.commit('getUser', this.username);\r\n                    await window.localStorage.setItem('userId', this.userId);\r\n                    this.$store.commit('editUserId', this.userId);\r\n                    window.alert('注册成功，确定进入网站首页');\r\n                    window.location.href = '/#/customerHome';\r\n                  } else {\r\n                    window.alert('用户名重复，请再次尝试');\r\n                    this.username = '';\r\n                    this.password = '';\r\n                    this.confirmPassword = ''\r\n                  }\r\n                }\r\n          },\r\n          changeLogin(b1, b2){\r\n              this.login = b1;\r\n              this.register = b2;\r\n          },\r\n          async goHome(){\r\n              if(!util.trim(this.username) || !util.trim(this.password) ){\r\n                  window.alert('账号或密码不能为空');\r\n                  return;\r\n              }\r\n\r\n              await this.searchUserInfo(this.username,this.password)\r\n\r\n              if(this.res){\r\n                  this.login = false;\r\n                  window.localStorage.setItem('loginStatus', 'login');\r\n                  await window.localStorage.setItem('userId', this.userId);\r\n                  this.$store.commit('editUserId', this.userId);\r\n                  console.log(this.userId);\r\n                  //console.log(error);\r\n                  window.alert('登陆成功，确定进入网站首页');\r\n                  window.location.href = '/#/customerHome';\r\n              }else{\r\n                  window.alert('账号或密码错误');\r\n              }\r\n          },\r\n\r\n          async addUserInfo (x1,x2) {\r\n            await this.axios.get('add_userInfo/',{params:{user_name: x1,user_password: x2}})\r\n              .catch(function (error) {\r\n                  console.log(error);\r\n                  this.res=false\r\n              })\r\n              .then((response) => {\r\n                if(response.data.error_num!==0){\r\n                  this.res=false\r\n                  console.log(response.data.msg);\r\n                  return\r\n                }\r\n                  console.log(response.data.msg);\r\n                  this.userId = response.data.userId\r\n                this.res=true\r\n              })\r\n              ;\r\n          },\r\n\r\n          async searchUserInfo (x1,x2) {\r\n            await this.axios.get('search_userInfo/',{params:{user_name: x1,user_password: x2}})\r\n              .catch(function (error) {\r\n                  console.log(error);\r\n                  console.log(x1);\r\n                  console.log(x2);\r\n\r\n                  this.res=false\r\n              })\r\n              .then((response) => {\r\n                if(response.data.error_num!==0){\r\n                  this.res=false\r\n                  console.log(response.data.msg);\r\n                  return\r\n                }\r\n                this.res=true\r\n\r\n                console.log(response.data);\r\n                this.userId = response.data.userId\r\n\r\n              })\r\n              ;\r\n          }\r\n        },\r\n        created(){\r\n            //获取路由中的参数\r\n            if(this.$route.params.loginStatus === 'logout'){\r\n                window.localStorage.removeItem('loginStatus')\r\n\r\n                this.$store.commit('getLoginStatus', false);\r\n                return;\r\n            }\r\n\r\n            const loginStatus = this.$store.state.loginStatus;\r\n            if(loginStatus){\r\n\r\n                this.login = false;\r\n                this.register = false;\r\n                window.alert('您已经是登录状态')\r\n                window.location.href = '/#/customerHome'\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .login-info{\r\n        height:100%;\r\n        width:100%;\r\n        text-align: center;\r\n    }\r\n    .login-info-form{\r\n        position: relative;\r\n        top: 100px;\r\n    }\r\n    p{\r\n         font-size: 26px;\r\n         color: #5c6b77;\r\n     }\r\n    .submit{\r\n        font-size: 18px;\r\n    }\r\n    span{\r\n        font-size: 16px;\r\n        color: #5c6b77;\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=cc4d3ffe&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=cc4d3ffe&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cc4d3ffe\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","login","_v","directives","name","rawName","value","username","expression","attrs","domProps","on","$event","target","composing","password","goHome","changeLogin","_e","register","confirmPassword","goLogin","staticRenderFns","data","res","userId","methods","window","console","params","user_name","user_password","catch","then","created","component"],"sourceRoot":""}