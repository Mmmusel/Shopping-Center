"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[38,566],{342:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"header"},[t._v("头部")]),t.show?[e("div",{staticClass:"header"},[e("router-link",{staticClass:"header-title",attrs:{to:"/customerHome"}},[t._v("电商网站首页")]),e("div",{staticClass:"header-menu"},[t._v(" "+t._s(t.user)+" ")]),t._v(" {% csrf_token %} "),e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"商品图片"}},[e("input",{attrs:{type:"file",id:"img"},on:{change:t.getImageFile}}),e("img",{attrs:{src:t.image}})]),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确认添加")])],1)],1),e("div",{staticClass:"header-menu"},[e("router-link",{staticClass:"header-menu-cart",attrs:{to:"/cart"}},[t._v(" 购物车 "),t.cartList.length?e("span",[t._v(t._s(t.cartList.length))]):t._e()])],1),e("div",{staticClass:"header-menu"},[e("router-link",{staticClass:"header-menu-cart",attrs:{to:"/login/logout"}},[t._v(" 退出登录 ")])],1),e("customerList")],1),e("router-view")]:t._e(),e("router-view")],2)},r=[],o=s(5105),i={components:{customerList:o["default"]},data(){return{user:"",image:"http://127.0.0.1:8000/media/avatar/airPods.jpg",form:{goods_image:""}}},methods:{getImageFile:function(t){this.form.goods_image=t.target.files[0]},async onSubmit(){console.log("good");let t=new FormData;t.append("goods_image",this.form.goods_image);var e={headers:{"Content-Type":"multipart/form-data"}};await this.axios.post("add_product/",t,e).then((t=>{"success"===t.data.msg&&(this.image="http://127.0.0.1:8000/media/"+t.data.image,console.log(t))}))}},computed:{cartList(){return this.$store.state.cartList},show(){return!0}},async created(){await this.axios.get("userId2userName/",{params:{user_id:this.$store.state.userId}}).then((t=>{console.log("ttttttttttttttttt"),console.log(this.$store.state.userId),console.log(t.data.user_name),console.log("ttttttttttttttttt"),this.user=t.data.user_name})).catch((function(t){console.log(t)}))}},n=i,l=s(1001),c=(0,l.Z)(n,a,r,!1,null,"13cffbf7",null),m=c.exports}}]);
//# sourceMappingURL=38.5025c268.js.map