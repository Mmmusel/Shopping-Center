{"version":3,"file":"static/js/579.284f9610.js","mappings":"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","sources":["webpack://my-project/./src/components/customer/login.vue","webpack://my-project/src/components/customer/login.vue","webpack://my-project/./src/components/customer/login.vue?542c","webpack://my-project/./src/components/customer/login.vue?59bb"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-info\"},[(_vm.login)?[_c('form',{staticClass:\"login-info-form\"},[_c('p',[_vm._v(\"登陆界面\")]),_c('br'),_c('span',[_vm._v(\"用户账号: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing)return;_vm.username=$event.target.value}}}),_c('br'),_c('span',[_vm._v(\"用户密码: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value}}}),_c('br'),_c('br'),_c('input',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"value\":\"提交\"},on:{\"click\":_vm.goHome}}),_c('input',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"value\":\"前往注册\"},on:{\"click\":function($event){return _vm.changeLogin(false, true)}}})])]:_vm._e(),(_vm.register)?[_c('form',{staticClass:\"login-info-form\"},[_c('p',[_vm._v(\"注册界面\")]),_c('br'),_c('span',[_vm._v(\"用户账号: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing)return;_vm.username=$event.target.value}}}),_c('br'),_c('span',[_vm._v(\"用户密码: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value}}}),_c('br'),_c('span',[_vm._v(\"确认密码: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.confirmPassword),expression:\"confirmPassword\"}],attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.confirmPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.confirmPassword=$event.target.value}}}),_c('br'),_c('br'),_c('input',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"value\":\"提交\"},on:{\"click\":_vm.goLogin}}),_c('input',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"value\":\"已有账号\"},on:{\"click\":function($event){return _vm.changeLogin(true, false)}}})])]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"login-info\">\n        <template v-if=\"login\">\n            <form class=\"login-info-form\">\n                <p>登陆界面</p><br>\n                <span>用户账号: </span><input type=\"text\" v-model=\"username\" placeholder=\"\"/><br>\n                <span>用户密码: </span><input type=\"password\" v-model=\"password\"/><br><br>\n                <input class=\"submit\" type=\"button\" @click=\"goHome\" value=\"提交\">\n                <input class=\"submit\" type=\"button\" @click=\"changeLogin(false, true)\" value=\"前往注册\">\n            </form>\n\n        </template>\n        <template v-if=\"register\">\n            <form class=\"login-info-form\">\n                <p>注册界面</p><br>\n                <span>用户账号: </span><input type=\"text\" v-model=\"username\" placeholder=\"\"/><br>\n                <span>用户密码: </span><input type=\"password\" v-model=\"password\"/><br>\n                <span>确认密码: </span><input type=\"password\" v-model=\"confirmPassword\"/><br><br>\n                <input class=\"submit\" type=\"button\" @click=\"goLogin\" value=\"提交\">\n                <input class=\"submit\" type=\"button\" @click=\"changeLogin(true, false)\" value=\"已有账号\">\n            </form>\n        </template>\n    </div>\n</template>\n\n<script>\n    import util from './util';\n    export default {\n        name: \"login_View\",\n        data(){\n            return {\n                login: false,\n                register: true,\n                username: '',\n                password: '',\n                confirmPassword: '',\n                res: false,  //数据库操作返回值\n                userId: 0  //当前登录的用户\n            }\n        },\n        methods: {\n           async  goLogin(){\n\n                if(!util.trim(this.username) || !util.trim(this.password) ){ //TODO 111\n                    window.alert('账号或密码不能为空');\n                    return;\n                }\n                if(this.password !== this.confirmPassword){\n                    window.alert('密码不一致，请重新输入');\n                    this.password = '';\n                    this.confirmPassword = '';\n                }else{\n                  //把注册信息写进数据库\n                  await this.addUserInfo(this.username,this.password)\n\n                  //res返回值 标志是否有重名\n                  if(this.res) {\n                    this.register = false;\n\n                    //设置当前登陆状态；用于下次打开页面的默认登录\n                    window.localStorage.setItem('loginStatus', 'login');\n\n                    //把用户【id】保存在vuex，便于home页面使用\n                    //this.$store.commit('getUser', this.username);\n                    await window.localStorage.setItem('userId', this.userId);\n                    this.$store.commit('editUserId', this.userId);\n                    window.alert('注册成功，确定进入网站首页');\n                    window.location.href = '/#/customerHome';\n                  } else {\n                    window.alert('用户名重复，请再次尝试');\n                    this.username = '';\n                    this.password = '';\n                    this.confirmPassword = ''\n                  }\n                }\n          },\n          changeLogin(b1, b2){\n              this.login = b1;\n              this.register = b2;\n          },\n          async goHome(){\n              if(!util.trim(this.username) || !util.trim(this.password) ){\n                  window.alert('账号或密码不能为空');\n                  return;\n              }\n\n              await this.searchUserInfo(this.username,this.password)\n\n              if(this.res){\n                  this.login = false;\n                  window.localStorage.setItem('loginStatus', 'login');\n                  await window.localStorage.setItem('userId', this.userId);\n                  this.$store.commit('editUserId', this.userId);\n                  console.log(this.userId);\n                  //console.log(error);\n                  window.alert('登陆成功，确定进入网站首页');\n                  window.location.href = '/#/customerHome';\n              }else{\n                  window.alert('账号或密码错误');\n              }\n          },\n\n          async addUserInfo (x1,x2) {\n            await this.axios.get('add_userInfo/',{params:{user_name: x1,user_password: x2}})\n              .catch(function (error) {\n                  console.log(error);\n                  this.res=false\n              })\n              .then((response) => {\n                if(response.data.error_num!==0){\n                  this.res=false\n                  console.log(response.data.msg);\n                  return\n                }\n                  console.log(response.data.msg);\n                  this.userId = response.data.userId\n                this.res=true\n              })\n              ;\n          },\n\n          async searchUserInfo (x1,x2) {\n            await this.axios.get('search_userInfo/',{params:{user_name: x1,user_password: x2}})\n              .catch(function (error) {\n                  console.log(error);\n                  console.log(x1);\n                  console.log(x2);\n\n                  this.res=false\n              })\n              .then((response) => {\n                if(response.data.error_num!==0){\n                  this.res=false\n                  console.log(response.data.msg);\n                  return\n                }\n                this.res=true\n\n                console.log(response.data);\n                this.userId = response.data.userId\n\n              })\n              ;\n          }\n        },\n        created(){\n            //获取路由中的参数\n            if(this.$route.params.loginStatus === 'logout'){\n                window.localStorage.removeItem('loginStatus')\n\n                this.$store.commit('getLoginStatus', false);\n                return;\n            }\n\n            const loginStatus = this.$store.state.loginStatus;\n            if(loginStatus){\n\n                this.login = false;\n                this.register = false;\n                window.alert('您已经是登录状态')\n                window.location.href = '/#/customerHome'\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .login-info{\n        height:100%;\n        width:100%;\n        text-align: center;\n    }\n    .login-info-form{\n        position: relative;\n        top: 100px;\n    }\n    p{\n         font-size: 26px;\n         color: #5c6b77;\n     }\n    .submit{\n        font-size: 18px;\n    }\n    span{\n        font-size: 16px;\n        color: #5c6b77;\n    }\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=cc4d3ffe&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=cc4d3ffe&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cc4d3ffe\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","login","_v","directives","name","rawName","value","username","expression","attrs","domProps","on","$event","target","composing","password","goHome","changeLogin","_e","register","confirmPassword","goLogin","staticRenderFns","data","res","userId","methods","window","console","params","user_name","user_password","catch","then","created","component"],"sourceRoot":""}