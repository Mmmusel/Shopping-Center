"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[579],{1579:function(s,t,e){e.r(t),e.d(t,{default:function(){return d}});var o=function(){var s=this,t=s._self._c;return t("div",{staticClass:"login-info"},[s.login?[t("form",{staticClass:"login-info-form"},[t("p",[s._v("登陆界面")]),t("br"),t("span",[s._v("用户账号: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],attrs:{type:"text",placeholder:""},domProps:{value:s.username},on:{input:function(t){t.target.composing||(s.username=t.target.value)}}}),t("br"),t("span",[s._v("用户密码: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{type:"password"},domProps:{value:s.password},on:{input:function(t){t.target.composing||(s.password=t.target.value)}}}),t("br"),t("br"),t("input",{staticClass:"submit",attrs:{type:"button",value:"提交"},on:{click:s.goHome}}),t("input",{staticClass:"submit",attrs:{type:"button",value:"前往注册"},on:{click:function(t){return s.changeLogin(!1,!0)}}})])]:s._e(),s.register?[t("form",{staticClass:"login-info-form"},[t("p",[s._v("注册界面")]),t("br"),t("span",[s._v("用户账号: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],attrs:{type:"text",placeholder:""},domProps:{value:s.username},on:{input:function(t){t.target.composing||(s.username=t.target.value)}}}),t("br"),t("span",[s._v("用户密码: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{type:"password"},domProps:{value:s.password},on:{input:function(t){t.target.composing||(s.password=t.target.value)}}}),t("br"),t("span",[s._v("确认密码: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:s.confirmPassword,expression:"confirmPassword"}],attrs:{type:"password"},domProps:{value:s.confirmPassword},on:{input:function(t){t.target.composing||(s.confirmPassword=t.target.value)}}}),t("br"),t("br"),t("input",{staticClass:"submit",attrs:{type:"button",value:"提交"},on:{click:s.goLogin}}),t("input",{staticClass:"submit",attrs:{type:"button",value:"已有账号"},on:{click:function(t){return s.changeLogin(!0,!1)}}})])]:s._e()],2)},r=[],a=e(8491),i={name:"login_View",data(){return{login:!1,register:!0,username:"",password:"",confirmPassword:"",res:!1,userId:0}},methods:{async goLogin(){a.Z.trim(this.username)&&a.Z.trim(this.password)?this.password!==this.confirmPassword?(window.alert("密码不一致，请重新输入"),this.password="",this.confirmPassword=""):(await this.addUserInfo(this.username,this.password),this.res?(this.register=!1,window.localStorage.setItem("loginStatus","login"),await window.localStorage.setItem("userId",this.userId),this.$store.commit("editUserId",this.userId),window.alert("注册成功，确定进入网站首页"),window.location.href="/#/customerHome"):(window.alert("用户名重复，请再次尝试"),this.username="",this.password="",this.confirmPassword="")):window.alert("账号或密码不能为空")},changeLogin(s,t){this.login=s,this.register=t},async goHome(){a.Z.trim(this.username)&&a.Z.trim(this.password)?(await this.searchUserInfo(this.username,this.password),this.res?(this.login=!1,window.localStorage.setItem("loginStatus","login"),await window.localStorage.setItem("userId",this.userId),this.$store.commit("editUserId",this.userId),console.log(this.userId),window.alert("登陆成功，确定进入网站首页"),window.location.href="/#/customerHome"):window.alert("账号或密码错误")):window.alert("账号或密码不能为空")},async addUserInfo(s,t){await this.axios.get("add_userInfo/",{params:{user_name:s,user_password:t}}).catch((function(s){console.log(s),this.res=!1})).then((s=>{if(0!==s.data.error_num)return this.res=!1,void console.log(s.data.msg);console.log(s.data.msg),this.userId=s.data.userId,this.res=!0}))},async searchUserInfo(s,t){await this.axios.get("search_userInfo/",{params:{user_name:s,user_password:t}}).catch((function(e){console.log(e),console.log(s),console.log(t),this.res=!1})).then((s=>{if(0!==s.data.error_num)return this.res=!1,void console.log(s.data.msg);this.res=!0,console.log(s.data),this.userId=s.data.userId}))}},created(){if("logout"===this.$route.params.loginStatus)return window.localStorage.removeItem("loginStatus"),void this.$store.commit("getLoginStatus",!1);const s=this.$store.state.loginStatus;s&&(this.login=!1,this.register=!1,window.alert("您已经是登录状态"),window.location.href="/#/customerHome")}},n=i,u=e(1001),l=(0,u.Z)(n,o,r,!1,null,"cc4d3ffe",null),d=l.exports}}]);
//# sourceMappingURL=579.284f9610.js.map